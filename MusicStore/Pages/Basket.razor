@page "/Basket"
@using MusicStore.Data;

@inject BasketService BasketService;

<div class="topnav">
        <a class="active" href="/Home">Home</a>
        <a href="/Artists">Artists</a>
        <a href="/Basket">Basket</a>
        <a href="/Products">Products</a>
        <a href="/Home">Home</a>
        <a href="/Profile">Profile</a>
        <a href="/Search">Search</a>
      </div>

<section>
    <h1 class="basket">Basket</h1>

    <h3>You have @BasketService.Products.Count items in your shopping cart</h3>

    <table>
    <article class="product">
        <div class="info">
            <a class="name">Song Name</a>

            <div class="data-group">
         <tr>
            <th>Name</th>
            <th class="data">Quantity</th>
            <th class="data">Price</th>
            <th class="data">Cost</th>
            <th>Actions</th>
        </tr>

            </div>
        </div>
            @foreach (var keyValuePair in BasketService.Products)
        {
            <BasketItem Item="@keyValuePair.Key" Quantity ="@keyValuePair.Value"></BasketItem> 
        }
        <tfoot>
            <tr>
                <th colspan="3" style="text-align:end">Total Cost</th>
                <th>@TotalCost.ToString("c")</th>
            </tr>
        </tfoot>
    </article>
</table>
</section>


@code {
    private double TotalCost { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        TotalCost = BasketService.GetTotal();
    }

}
